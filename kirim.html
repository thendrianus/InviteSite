<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kirim Undangan Natal Batam 2025</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cormorant+Garamond:wght@300;400;500&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at top, #1a2642 0%, #0a1628 40%, #050912 100%);
            color: #f5f5f5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 15px;
        }

        .page-wrapper {
            width: 100%;
            max-width: 700px;
            background: rgba(5, 9, 18, 0.9);
            border-radius: 16px;
            border: 1px solid rgba(212, 175, 55, 0.4);
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            padding: 25px 18px 30px;
            backdrop-filter: blur(12px);
        }

        @media (min-width: 768px) {
            .page-wrapper {
                padding: 35px 32px 40px;
            }
        }

        .page-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .page-title-script {
            font-family: 'Great Vibes', cursive;
            font-size: 2.4rem;
            color: #d4af37;
            margin-bottom: 4px;
        }

        .page-subtitle {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            letter-spacing: 1px;
            color: #f9f7f4;
        }

        .page-desc {
            margin-top: 10px;
            font-size: 0.92rem;
            color: #d2d2d2;
            line-height: 1.6;
        }

        .badge {
            display: inline-block;
            margin-top: 10px;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(212, 175, 55, 0.5);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #f3e4b5;
        }

        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #f9f7f4;
        }

        .card {
            background: rgba(10, 16, 32, 0.9);
            border-radius: 14px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 18px 15px 20px;
            margin-bottom: 18px;
        }

        @media (min-width: 768px) {
            .card {
                padding: 20px 22px 22px;
            }
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 6px;
            color: #f5f5f5;
        }

        .form-label small {
            font-weight: 300;
            font-size: 0.8rem;
            color: #c2c2c2;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 11px 13px;
            border-radius: 8px;
            border: 1px solid #40475f;
            background: rgba(5, 9, 18, 0.9);
            color: #f5f5f5;
            font-size: 0.95rem;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.25s ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.25);
        }

        .form-textarea {
            resize: vertical;
            min-height: 90px;
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .radio-pill {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 7px 12px;
            border-radius: 999px;
            border: 1px solid #40475f;
            font-size: 0.85rem;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }

        .radio-pill input {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .radio-pill span {
            pointer-events: none;
        }

        .radio-pill.active {
            border-color: #d4af37;
            background: radial-gradient(circle at top, rgba(212, 175, 55, 0.35), rgba(10, 16, 32, 0.95));
            box-shadow: 0 0 12px rgba(212, 175, 55, 0.35);
            color: #f9f7f4;
        }

        .small-hint {
            font-size: 0.78rem;
            color: #b8b8b8;
            margin-top: 3px;
        }

        .two-columns {
            display: grid;
            gap: 10px;
        }

        @media (min-width: 600px) {
            .two-columns {
                grid-template-columns: 1.3fr 1fr;
            }
        }

        .buttons-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .btn {
            border: none;
            border-radius: 999px;
            padding: 10px 18px;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.5px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, #d4af37, #b8941f);
            color: #0a1628;
            box-shadow: 0 8px 18px rgba(212, 175, 55, 0.35);
        }

        .btn-primary:hover {
            transform: translateY(-1px) scale(1.02);
            box-shadow: 0 10px 22px rgba(212, 175, 55, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: #f5f5f5;
            border: 1px solid #555c75;
        }

        .btn-secondary:hover {
            border-color: #d4af37;
            color: #f9f7f4;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .output-box {
            background: rgba(5, 9, 18, 0.9);
            border-radius: 10px;
            border: 1px dashed rgba(212, 175, 55, 0.6);
            padding: 10px 11px;
            font-size: 0.82rem;
            word-break: break-all;
            color: #f3e4b5;
        }

        .label-small {
            font-size: 0.82rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #d4af37;
            margin-bottom: 4px;
        }

        .message-note {
            font-size: 0.8rem;
            color: #bfbfbf;
            margin-top: 8px;
        }

        .footer-note {
            margin-top: 18px;
            text-align: center;
            font-size: 0.8rem;
            color: #aaaaaa;
        }

        .footer-note a {
            color: #d4af37;
            text-decoration: none;
        }

        .footer-note a:hover {
            text-decoration: underline;
        }

        .alert {
            font-size: 0.8rem;
            padding: 7px 10px;
            border-radius: 8px;
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.4);
            color: #ffe69c;
            margin-top: 8px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <header class="page-header">
            <div class="page-title-script">Natal Batam 2025</div>
            <div class="page-subtitle">Generator Link Undangan</div>
            <div class="badge">Untuk jemaat yang ingin mengirim undangan</div>
            <p class="page-desc">
                Halaman ini membantu Anda membuat link undangan dan teks WhatsApp 
                secara otomatis. Cukup isi nama yang diundang dan nama Anda, lalu 
                kirim lewat WhatsApp.
            </p>
        </header>

        <!-- FORM -->
        <section class="card">
            <h2 class="section-title">Data Undangan</h2>

            <div class="form-group">
                <label class="form-label">Sapaan (Title)</label>
                <div class="radio-group" id="titleOptions">
                    <label class="radio-pill active">
                        <input type="radio" name="titleOption" value="Bapak" checked>
                        <span>Bapak</span>
                    </label>
                    <label class="radio-pill">
                        <input type="radio" name="titleOption" value="Ibu">
                        <span>Ibu</span>
                    </label>
                    <label class="radio-pill">
                        <input type="radio" name="titleOption" value="Sdr.">
                        <span>Sdr.</span>
                    </label>
                    <label class="radio-pill">
                        <input type="radio" name="titleOption" value="Sdri.">
                        <span>Sdri.</span>
                    </label>
                    <label class="radio-pill">
                        <input type="radio" name="titleOption" value="Pdt.">
                        <span>Pdt.</span>
                    </label>
                    <label class="radio-pill">
                        <input type="radio" name="titleOption" value="custom">
                        <span>Lainnya</span>
                    </label>
                </div>
                <input 
                    type="text" 
                    id="customTitle" 
                    class="form-input" 
                    placeholder="Contoh: Bpk. Guru, Om, Tante, dsb." 
                    style="margin-top: 8px; display: none;"
                >
                <div class="small-hint">
                    Sapaan ini akan muncul seperti: <strong>Bapak. Yohanes</strong> atau <strong>Pdt. Eko Aria</strong>.
                </div>
            </div>

            <div class="two-columns">
                <div class="form-group">
                    <label class="form-label">Nama yang Diundang</label>
                    <input 
                        type="text" 
                        id="guestName" 
                        class="form-input" 
                        placeholder="Contoh: Yohanes Wijaya"
                    >
                    <div class="small-hint">
                        Nama ini akan tampil di halaman undangan dan di teks WhatsApp.
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        Nama Pengirim <small>(disimpan otomatis)</small>
                    </label>
                    <input 
                        type="text" 
                        id="senderName" 
                        class="form-input" 
                        placeholder="Contoh: Andreas"
                    >
                    <div class="small-hint">
                        Nama ini akan disimpan di HP Anda, jadi tidak perlu ketik ulang.
                    </div>
                </div>
            </div>

            <div class="alert hidden" id="validationAlert">
                Mohon lengkapi <strong>Nama yang Diundang</strong> dan <strong>Nama Pengirim</strong> terlebih dahulu.
            </div>

            <div class="buttons-row">
                <button class="btn btn-primary" id="generateBtn">
                    âœ¨ Buat Link & Teks
                </button>
            </div>
        </section>

        <!-- OUTPUT -->
        <section class="card">
            <h2 class="section-title">Hasil Undangan</h2>

            <div class="form-group">
                <div class="label-small">Link Undangan</div>
                <div class="output-box" id="inviteLink">
                    Link akan muncul di sini setelah Anda membuat undangan.
                </div>
                <div class="buttons-row">
                    <button class="btn btn-secondary" id="copyLinkBtn" disabled>
                        ðŸ“‹ Salin Link
                    </button>
                    <button class="btn btn-primary" id="openLinkBtn" disabled>
                        ðŸ”— Lihat Link
                    </button>
                </div>
            </div>

            <div class="form-group">
                <div class="label-small">Teks WhatsApp</div>
                <textarea 
                    id="waMessage" 
                    class="form-textarea" 
                    readonly
                    placeholder="Teks WhatsApp akan muncul di sini setelah Anda membuat undangan."
                ></textarea>
                <div class="message-note">
                    Teks ini bisa Anda salin lalu tempel di WhatsApp, atau langsung kirim dengan tombol di bawah.
                </div>
                <div class="buttons-row">
                    <button class="btn btn-secondary" id="copyMessageBtn" disabled>
                        ðŸ“‹ Salin Teks
                    </button>
                    <button class="btn btn-primary" id="sendWhatsAppBtn" disabled:
                        ðŸ“² Kirim via WhatsApp
                    </button>
                </div>
            </div>
        </section>

        <div class="footer-note">
            Link undangan akan mengarahkan ke <a href="https://natalbatam.com" target="_blank">natalbatam.com</a> 
            dengan nama tamu dan pengirim yang sudah dipersonalisasi.
        </div>
    </div>

    <script>
        // ====== KONFIGURASI DASAR ======
        const BASE_URL = "https://natalbatam.com";

        const titleOptionsEl = document.getElementById("titleOptions");
        const customTitleEl = document.getElementById("customTitle");
        const guestNameEl = document.getElementById("guestName");
        const senderNameEl = document.getElementById("senderName");
        const generateBtn = document.getElementById("generateBtn");
        const inviteLinkEl = document.getElementById("inviteLink");
        const waMessageEl = document.getElementById("waMessage");
        const copyLinkBtn = document.getElementById("copyLinkBtn");
        const copyMessageBtn = document.getElementById("copyMessageBtn");
        const sendWhatsAppBtn = document.getElementById("sendWhatsAppBtn");
        const openLinkBtn = document.getElementById("openLinkBtn");
        const validationAlert = document.getElementById("validationAlert");

        // ====== LOCAL STORAGE: NAMA PENGIRIM ======
        document.addEventListener("DOMContentLoaded", function () {
            const savedSender = localStorage.getItem("senderName");
            if (savedSender) {
                senderNameEl.value = savedSender;
            }

            senderNameEl.addEventListener("input", function () {
                const val = senderNameEl.value.trim();
                if (val) {
                    localStorage.setItem("senderName", val);
                } else {
                    localStorage.removeItem("senderName");
                }
            });
        });

        // ====== PILIHAN TITLE (SAPAAN) ======
        function getSelectedTitle() {
            const checked = titleOptionsEl.querySelector("input[name='titleOption']:checked");
            if (!checked) return "Bapak/Ibu/Sdr/i";

            const val = checked.value;
            if (val === "custom") {
                const custom = customTitleEl.value.trim();
                return custom || "Bapak/Ibu/Sdr/i";
            }
            return val;
        }

        titleOptionsEl.addEventListener("change", function (e) {
            if (e.target.name === "titleOption") {
                // update UI pill active
                const pills = titleOptionsEl.querySelectorAll(".radio-pill");
                pills.forEach(pill => pill.classList.remove("active"));
                const label = e.target.closest(".radio-pill");
                if (label) label.classList.add("active");

                // toggle custom input
                if (e.target.value === "custom") {
                    customTitleEl.style.display = "block";
                    customTitleEl.focus();
                } else {
                    customTitleEl.style.display = "none";
                }
            }
        });

        // ====== GENERATE LINK & TEKS ======
        function generateInvite() {
            const guestName = guestNameEl.value.trim();
            const senderName = senderNameEl.value.trim();
            let titleText = getSelectedTitle().trim();

            if (!guestName || !senderName) {
                validationAlert.classList.remove("hidden");
                return;
            } else {
                validationAlert.classList.add("hidden");
            }

            // Pastikan title berakhir dengan titik.
            if (!titleText.endsWith(".")) {
                titleText += ".";
            }

            // Bangun URL dengan parameter
            const params = new URLSearchParams();
            params.set("title", titleText.replace(/\s+/g, " ").trim());
            params.set("to", guestName);
            params.set("from", senderName);

            const fullUrl = `${BASE_URL}?${params.toString()}`;

            // Tampilkan link
            inviteLinkEl.textContent = fullUrl;

            // Bangun teks WhatsApp (Bahasa Indonesia)
            const waLines = [
                `Shalom ${guestName},`,
                ``,
                `Saya ${senderName} ingin mengundang ${titleText} ${guestName} untuk hadir dalam Perayaan Natal Batam 2025 dengan tema "Tidak Ada yang Mustahil".`,
                ``,
                `Silakan melihat undangan lengkap di link berikut:`,
                `${fullUrl}`,
                ``,
                `Terima kasih, Tuhan Yesus memberkati.`
            ];

            const waText = waLines.join("\n");
            waMessageEl.value = waText;

            // Aktifkan tombol-tombol
            copyLinkBtn.disabled = false;
            copyMessageBtn.disabled = false;
            sendWhatsAppBtn.disabled = false;
            openLinkBtn.disabled = false;
        }

        generateBtn.addEventListener("click", function () {
            generateInvite();
        });

        // ====== COPY TO CLIPBOARD ======
        async function copyToClipboard(text) {
            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    await navigator.clipboard.writeText(text);
                    alert("Tersalin ke clipboard.");
                } else {
                    // fallback
                    const temp = document.createElement("textarea");
                    temp.value = text;
                    document.body.appendChild(temp);
                    temp.select();
                    document.execCommand("copy");
                    document.body.removeChild(temp);
                    alert("Tersalin ke clipboard.");
                }
            } catch (e) {
                alert("Gagal menyalin. Silakan salin manual.");
            }
        }

        copyLinkBtn.addEventListener("click", function () {
            const linkText = inviteLinkEl.textContent.trim();
            if (linkText && !linkText.startsWith("Link akan muncul")) {
                copyToClipboard(linkText);
            }
        });

        copyMessageBtn.addEventListener("click", function () {
            const msg = waMessageEl.value.trim();
            if (msg) {
                copyToClipboard(msg);
            }
        });

        // ====== KIRIM VIA WHATSAPP ======
        sendWhatsAppBtn.addEventListener("click", function () {
            const msg = waMessageEl.value.trim();
            if (!msg) return;

            const encoded = encodeURIComponent(msg);
            const waUrl = `https://wa.me/?text=${encoded}`;
            window.open(waUrl, "_blank");
        });

        // ====== LIHAT LINK UNDANGAN (OPEN TAB BARU) ======
        openLinkBtn.addEventListener("click", function () {
            const linkText = inviteLinkEl.textContent.trim();
            if (linkText && !linkText.startsWith("Link akan muncul")) {
                window.open(linkText, "_blank");
            }
        });
    </script>
</body>
</html>
